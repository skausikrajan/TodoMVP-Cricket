<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cricket Task Manager - Strategic Play with Voice Commentary</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
  background: linear-gradient(135deg, #0a192f, #1a2a6c, #0a192f);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  color: #fff;
  min-height: 100vh;
  overflow-x: hidden;
  padding: 20px;
  position: relative;
}

/* Stadium background class */
body.stadium-bg {
  background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
              url('https://cdn.bsky.app/img/feed_fullsize/plain/did:plc:jsxbwyr57fvqnhfthbaoh4ox/bafkreibsvxqihagnjpydd26ccteccmt7gb4pcr3y6vj5dzg43qucacvnau@jpeg') no-repeat center center/cover;
  background-attachment: fixed;
  animation: none;
}

@keyframes gradientBG {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Preloader styles */
#preloader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #002244;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.5s ease;
}

#preloader h1 {
  font-size: 3.5rem;
  margin-bottom: 40px;
  text-shadow: 0 0 15px rgba(255, 204, 0, 0.8);
  background: linear-gradient(45deg, #ffcc00, #ff8c00, #ffcc00);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-size: 200% auto;
  animation: shine 3s linear infinite;
}

.loading-bar {
  width: 300px;
  height: 10px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 5px;
  overflow: hidden;
  position: relative;
}

.loading-progress {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #ff8c00, #ffcc00);
  border-radius: 5px;
  animation: loading 2s forwards;
}

@keyframes loading {
  0% { width: 0%; }
  100% { width: 100%; }
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1fr;
  gap: 20px;
}

header {
  text-align: center;
  padding: 20px 0;
  margin-bottom: 20px;
  border-bottom: 3px solid #ffcc00;
  position: relative;
  overflow: hidden;
}

header h1 {
  font-size: 2.8rem;
  margin-bottom: 10px;
  text-shadow: 0 0 10px rgba(255, 204, 0, 0.7);
  background: linear-gradient(45deg, #ffcc00, #ff8c00, #ffcc00);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-size: 200% auto;
  animation: shine 3s linear infinite;
}

@keyframes shine {
  0% { background-position: 0% 50%; }
  100% { background-position: 200% 50%; }
}

header p {
  font-size: 1.2rem;
  max-width: 800px;
  margin: 0 auto;
  color: #e0e0e0;
}

.panel {
  background: rgba(0, 20, 40, 0.85);
  border-radius: 15px;
  padding: 25px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 204, 0, 0.3);
  backdrop-filter: blur(10px);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  position: relative;
  overflow: hidden;
}

.panel::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: linear-gradient(90deg, #ffcc00, #ff8c00, #ffcc00);
  transform: translateX(-100%);
  transition: transform 0.5s ease;
}

.panel:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.7);
}

.panel:hover::before {
  transform: translateX(0);
}

.panel h2 {
  color: #ffcc00;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 2px solid rgba(255, 204, 0, 0.3);
  display: flex;
  align-items: center;
  gap: 10px;
}

.panel h2 i {
  font-size: 1.4rem;
}

/* Toss Section with Enhanced Emoji Coin */
.toss-section {
  text-align: center;
  padding: 20px;
  background: rgba(0, 30, 60, 0.8);
  border-radius: 15px;
  margin-bottom: 20px;
}

.toss-options {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin: 20px 0;
}

.coin {
  font-size: 100px;
  margin: 20px 0;
  transition: transform 0.5s;
  display: inline-block;
  transform-style: preserve-3d;
  position: relative;
  width: 120px;
  height: 120px;
  filter: drop-shadow(0 0 10px rgba(255, 204, 0, 0.7));
}

.coin.flipping {
  animation: flip 1.5s ease-out;
}

@keyframes flip {
  0% {
    transform: rotateY(0deg) scale(1);
    opacity: 1;
  }
  25% {
    transform: rotateY(900deg) scale(1.1);
    opacity: 0.8;
  }
  50% {
    transform: rotateY(1800deg) scale(0.9);
    opacity: 1;
  }
  75% {
    transform: rotateY(2700deg) scale(1.05);
    opacity: 0.9;
  }
  100% {
    transform: rotateY(3600deg) scale(1);
    opacity: 1;
  }
}

/* Strategic Play Section */
.strategic-play {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

@media (max-width: 900px) {
  .strategic-play {
    grid-template-columns: 1fr;
  }
}

/* Match Info */
.match-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.scoreboard {
  display: flex;
  justify-content: space-between;
  background: rgba(0, 30, 60, 0.9);
  border-radius: 10px;
  padding: 15px;
  margin-top: 20px;
  border: 2px solid #ffcc00;
  width: 100%;
  position: relative;
  overflow: hidden;
}

.scoreboard::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(45deg, transparent, rgba(255, 204, 0, 0.1), transparent);
  transform: translateX(-100%);
  animation: scoreboardShine 3s infinite;
}

@keyframes scoreboardShine {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.score-item {
  text-align: center;
  flex: 1;
  position: relative;
  z-index: 1;
}

.score-label {
  font-size: 0.9rem;
  color: #a0aec0;
  margin-bottom: 5px;
}

.score-value {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffcc00;
  text-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
}

/* Task Form */
.task-form .form-group {
  margin-bottom: 20px;
  position: relative;
}

.task-form label {
  display: block;
  margin-bottom: 8px;
  color: #ffcc00;
  font-weight: 500;
}

.task-form input,
.task-form select,
.task-form textarea {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #4a5568;
  background: rgba(0, 10, 20, 0.7);
  color: white;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.task-form input:focus,
.task-form select:focus,
.task-form textarea:focus {
  outline: none;
  border-color: #ffcc00;
  box-shadow: 0 0 0 3px rgba(255, 204, 0, 0.2);
}

.btn {
  background: linear-gradient(45deg, #ff8c00, #ffcc00);
  color: #002244;
  border: none;
  padding: 12px 25px;
  border-radius: 50px;
  font-size: 1.1rem;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  box-shadow: 0 5px 15px rgba(255, 140, 0, 0.4);
  width: 100%;
  margin-top: 15px;
  position: relative;
  overflow: hidden;
  z-index: 1;
}

.btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(45deg, #ffcc00, #ff8c00, #ffcc00);
  z-index: -1;
  transition: transform 0.5s ease;
  transform: translateX(-100%);
}

.btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(255, 140, 0, 0.6);
}

.btn:hover::before {
  transform: translateX(0);
}

.btn:active {
  transform: translateY(1px);
}

/* Task Lists */
.task-list {
  max-height: 400px;
  overflow-y: auto;
  padding-right: 10px;
}

.task-list::-webkit-scrollbar {
  width: 8px;
}

.task-list::-webkit-scrollbar-track {
  background: rgba(0, 10, 20, 0.5);
  border-radius: 4px;
}

.task-list::-webkit-scrollbar-thumb {
  background: #ffcc00;
  border-radius: 4px;
}

.task-item {
  background: rgba(0, 30, 60, 0.7);
  border-radius: 10px;
  padding: 15px;
  margin-bottom: 15px;
  border-left: 4px solid #ffcc00;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.task-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(45deg, transparent, rgba(255, 204, 0, 0.1), transparent);
  transform: translateX(-100%);
  animation: taskShine 3s infinite;
}

@keyframes taskShine {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.task-item:hover {
  background: rgba(0, 40, 80, 0.8);
  transform: translateX(5px);
}

.task-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.task-title {
  font-weight: bold;
  font-size: 1.1rem;
  color: #ffcc00;
}

.task-runs {
  font-size: 0.9rem;
  padding: 3px 10px;
  border-radius: 20px;
  background: rgba(255, 204, 0, 0.2);
}

.task-meta {
  display: flex;
  justify-content: space-between;
  font-size: 0.9rem;
  color: #a0aec0;
  margin-top: 10px;
}

.task-actions {
  display: flex;
  gap: 10px;
  margin-top: 15px;
}

.action-btn {
  flex: 1;
  padding: 8px;
  border-radius: 6px;
  border: none;
  color: white;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
}

.complete-btn {
  background: rgba(76, 175, 80, 0.3);
}

.complete-btn:hover {
  background: rgba(76, 175, 80, 0.5);
}

/* Animation Preview Area */
.animation-preview {
  background: rgba(0, 10, 20, 0.8);
  border-radius: 15px;
  padding: 30px;
  margin-top: 20px;
  min-height: 300px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  border: 2px dashed rgba(255, 204, 0, 0.3);
}

.preview-content {
  text-align: center;
  z-index: 2;
}

.preview-title {
  font-size: 2.5rem;
  color: #ffcc00;
  margin-bottom: 20px;
  text-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
}

.preview-desc {
  font-size: 1.2rem;
  max-width: 600px;
  margin: 0 auto 30px;
  color: #e0e0e0;
}

/* Animation Elements */
.cricket-ball {
  width: 40px;
  height: 40px;
  background: radial-gradient(circle at 30% 30%, #ffffff, #d32f2f);
  border-radius: 50%;
  position: absolute;
  box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
  z-index: 1;
  display: none;
}

.batsman {
  position: absolute;
  width: 80px;
  height: 150px;
  background: url('https://cdn.bsky.app/img/feed_fullsize/plain/did:plc:jsxbwyr57fvqnhfthbaoh4ox/bafkreicih42ckfgken3u4zknc3sikd7jez4jugyzsmf6nm52eityiqemh4@jpeg') no-repeat center center/contain;
  z-index: 1;
  bottom: 50px;
  display: none;
}

.wicket {
  position: absolute;
  width: 10px;
  height: 80px;
  background: linear-gradient(to bottom, #8B4513, #A0522D);
  border-radius: 5px;
  z-index: 1;
  display: none;
  transform-origin: bottom;
}

.wicket-top {
  position: absolute;
  width: 60px;
  height: 10px;
  background: linear-gradient(to right, #8B4513, #A0522D);
  border-radius: 5px;
  top: 0;
  left: -25px;
}

.trophy {
  position: absolute;
  font-size: 4rem;
  color: gold;
  text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
  z-index: 1;
  display: none;
}

.confetti {
  position: absolute;
  width: 10px;
  height: 10px;
  background: #ffcc00;
  border-radius: 50%;
  z-index: 0;
}

/* Animations */
@keyframes float {
  0% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(10deg); }
  100% { transform: translateY(0) rotate(0deg); }
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.1); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes rotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes moveLeftRight {
  0% { left: 10%; }
  50% { left: 70%; }
  100% { left: 10%; }
}

@keyframes moveUpDown {
  0% { top: 20%; }
  50% { top: 60%; }
  100% { top: 20%; }
}

@keyframes hitOne {
  0% { transform: rotate(0deg); }
  50% { transform: rotate(-10deg); }
  100% { transform: rotate(0deg); }
}

@keyframes hitTwo {
  0% { transform: rotate(0deg); }
  50% { transform: rotate(20deg); }
  100% { transform: rotate(0deg); }
}

@keyframes hitFour {
  0% { transform: rotate(0deg); }
  50% { transform: rotate(-45deg); }
  100% { transform: rotate(0deg); }
}

@keyframes hitSix {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(60deg); }
  75% { transform: rotate(-30deg); }
  100% { transform: rotate(0deg); }
}

@keyframes ballOne {
  0% { transform: translateX(-50%) translateY(0px) scale(1); opacity: 1; }
  20% { transform: translateX(-50%) translateY(-20px) scale(0.9); }
  40% { transform: translateX(-50%) translateY(-5px) scale(1.1); }
  60% { transform: translateX(-70%) translateY(-10px) scale(1); opacity: 1;}
  100% { transform: translateX(-80%) translateY(-15px) scale(0.8); opacity: 0; }
}

@keyframes ballTwo {
  0% { transform: translateX(-50%) translateY(0px) scale(1); opacity: 1; }
  20% { transform: translateX(-50%) translateY(-20px) scale(0.9); }
  40% { transform: translateX(-50%) translateY(-5px) scale(1.1); }
  60% { transform: translateX(0%) translateY(-25px) scale(1); opacity: 1;}
  100% { transform: translateX(50%) translateY(-35px) scale(0.8); opacity: 0; }
}

@keyframes ballFour {
  0% { transform: translateX(-50%) translateY(0px) scale(1); opacity: 1; }
  20% { transform: translateX(-50%) translateY(-20px) scale(0.9); }
  40% { transform: translateX(-50%) translateY(-5px) scale(1.1); }
  60% { transform: translateX(100%) translateY(-40px) scale(1); opacity: 1;}
  100% { transform: translateX(250%) translateY(-50px) scale(0.7); opacity: 0; }
}

@keyframes ballSix {
  0% { transform: translateX(-50%) translateY(0px) scale(1); opacity: 1; }
  20% { transform: translateX(-50%) translateY(-20px) scale(0.9); }
  40% { transform: translateX(-50%) translateY(-5px) scale(1.1); }
  60% { transform: translateX(150%) translateY(-180px) scale(0.8); opacity: 1;}
  100% { transform: translateX(300%) translateY(-300px) scale(0.5); opacity: 0; }
}

@keyframes wicketFall {
  0% { transform: rotate(0); }
  100% { transform: rotate(-45deg); }
}

.floating {
  animation: float 3s ease-in-out infinite;
}

.pulsing {
  animation: pulse 2s ease-in-out infinite;
}

.rotating {
  animation: rotate 4s linear infinite;
}

.moving-lr {
  animation: moveLeftRight 6s linear infinite;
}

.moving-ud {
  animation: moveUpDown 5s ease-in-out infinite;
}

.animateOne { animation: hitOne 0.8s ease-out forwards; }
.animateTwo { animation: hitTwo 0.9s ease-out forwards; }
.animateFour { animation: hitFour 1s ease-out forwards; }
.animateSix { animation: hitSix 1.2s ease-out forwards; }

.ballAnimateOne { animation: ballOne 0.8s ease-out forwards; }
.ballAnimateTwo { animation: ballTwo 0.9s ease-out forwards; }
.ballAnimateFour { animation: ballFour 1s ease-out forwards; }
.ballAnimateSix { animation: ballSix 1.2s ease-out forwards; }

.wicketFalling { animation: wicketFall 0.5s ease-out forwards; }

/* Footer */
footer {
  text-align: center;
  padding: 30px 0 20px;
  color: #a0aec0;
  font-size: 0.9rem;
  border-top: 1px solid rgba(255, 204, 0, 0.2);
  margin-top: 20px;
}

.features {
  display: flex;
  justify-content: center;
  gap: 30px;
  flex-wrap: wrap;
  margin: 20px 0;
}

.feature {
  background: rgba(0, 20, 40, 0.7);
  padding: 15px 20px;
  border-radius: 10px;
  min-width: 200px;
  text-align: center;
  border: 1px solid rgba(255, 204, 0, 0.2);
  transition: transform 0.3s ease;
}

.feature:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
}

.feature i {
  font-size: 2rem;
  color: #ffcc00;
  margin-bottom: 10px;
}

/* Game Controls */
.game-section {
  display: none;
}

.toss-section {
  display: block;
}

/* Fix for task actions */
.task-actions {
  justify-content: center;
}

/* Shot Display Overlay */
.shot-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
              url('https://cdn.bsky.app/img/feed_fullsize/plain/did:plc:jsxbwyr57fvqnhfthbaoh4ox/bafkreibsvxqihagnjpydd26ccteccmt7gb4pcr3y6vj5dzg43qucacvnau@jpeg') no-repeat center center/cover;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s ease;
}

.shot-overlay.visible {
  opacity: 1;
  pointer-events: auto;
}

.shot-message {
  font-size: 3em;
  color: #ffcc00;
  text-shadow: 0 0 20px rgba(255, 204, 0, 0.8);
  margin-bottom: 30px;
  text-align: center;
  animation: pulse 1.5s infinite;
  background: rgba(0, 0, 0, 0.5);
  padding: 10px 20px;
  border-radius: 10px;
}

.animation-container {
  position: relative;
  width: 100%;
  height: 300px;
}

/* Confetti effects */
.confetti {
  position: absolute;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  z-index: 0;
  opacity: 0;
}

@keyframes confetti-fall {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(500px) rotate(360deg); opacity: 0; }
}

.confetti-animation {
  animation: confetti-fall 2s ease-out forwards;
}

/* Achievement Badges */
.achievements {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 15px;
}

.badge {
  background: rgba(255, 204, 0, 0.2);
  color: #ffcc00;
  padding: 5px 10px;
  border-radius: 20px;
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  gap: 5px;
}

/* Power Play Mode */
.power-play {
  background: linear-gradient(45deg, #ffcc00, #ff8c00, #ffcc00);
  color: #002244;
  padding: 10px;
  text-align: center;
  border-radius: 10px;
  font-weight: bold;
  margin-top: 15px;
  animation: pulse 1.5s infinite;
}

/* Player Stats */
.player-stats {
  display: flex;
  justify-content: space-around;
  margin-top: 20px;
  flex-wrap: wrap;
  gap: 15px;
}

.stat-card {
  background: rgba(0, 30, 60, 0.7);
  border-radius: 10px;
  padding: 15px;
  text-align: center;
  min-width: 120px;
  border: 1px solid rgba(255, 204, 0, 0.3);
}

.stat-value {
  font-size: 1.8rem;
  color: #ffcc00;
  font-weight: bold;
  margin: 5px 0;
}

.stat-label {
  font-size: 0.9rem;
  color: #a0aec0;
}

/* Stadium Elements */
.stadium-element {
  position: absolute;
  z-index: -1;
}

.pitch {
  position: absolute;
  width: 300px;
  height: 100px;
  background: linear-gradient(to bottom, #1a5e1a, #0d3d0d);
  bottom: 50px;
  left: 50%;
  transform: translateX(-50%);
  border: 2px solid #fff;
  border-radius: 5px;
  z-index: 0;
}

/* How to Play Section */
.how-to-play {
  margin-top: 20px;
  padding: 15px;
  background: rgba(0, 30, 60, 0.7);
  border-radius: 10px;
}

.how-to-play h3 {
  color: #ffcc00;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.step {
  display: flex;
  margin-bottom: 15px;
  align-items: flex-start;
}

.step-number {
  background: #ffcc00;
  color: #002244;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin-right: 10px;
  flex-shrink: 0;
}

/* Commentary Section */
.commentary-toggle {
  position: absolute;
  top: 20px;
  right: 20px;
  z-index: 100;
}

.commentary-btn {
  background: rgba(0, 30, 60, 0.7);
  border: 2px solid #ffcc00;
  color: #ffcc00;
  border-radius: 50px;
  padding: 8px 16px;
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: bold;
}

.commentary-btn:hover {
  background: rgba(255, 204, 0, 0.2);
}

.commentary-btn.active {
  background: #ffcc00;
  color: #002244;
}

.commentary-box {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 80%;
  max-width: 800px;
  background: rgba(0, 20, 40, 0.9);
  border: 2px solid #ffcc00;
  border-radius: 10px;
  padding: 15px;
  z-index: 100;
  backdrop-filter: blur(5px);
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  gap: 15px;
}

.commentary-icon {
  background: #ffcc00;
  color: #002244;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.commentary-text {
  font-size: 1.1rem;
  font-style: italic;
  flex: 1;
  min-height: 40px;
  display: flex;
  align-items: center;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  header h1 {
    font-size: 2.2rem;
  }
  
  .toss-options {
    flex-direction: column;
    gap: 10px;
  }
  
  .btn {
    padding: 10px;
    font-size: 1rem;
  }
  
  .features {
    flex-direction: column;
    align-items: center;
  }
  
  .player-stats {
    flex-direction: column;
    align-items: center;
  }
  
  .stat-card {
    width: 100%;
  }
  
  .commentary-box {
    width: 90%;
    padding: 10px;
    flex-direction: column;
    align-items: flex-start;
  }
  
  .commentary-icon {
    margin-bottom: 10px;
  }
}
</style>
</head>
<body>
<!-- Preloader -->
<div id="preloader">
  <h1><i class="fas fa-baseball-ball"></i> Cricket Task Manager</h1>
  <div class="loading-bar">
    <div class="loading-progress"></div>
  </div>
</div>

<div class="container">
<header>
  <h1><i class="fas fa-baseball-ball"></i> Cricket Task Manager - Strategic Play</h1>
  <p>Manage your tasks like a cricket pro! Complete tasks to score runs with strategic shot selection.</p>
  
  <div class="commentary-toggle">
    <div class="commentary-btn" id="commentaryToggle">
      <i class="fas fa-volume-up"></i>
      <span>Commentary ON</span>
    </div>
  </div>
</header>

<!-- Commentary Box -->
<div class="commentary-box" id="commentaryBox">
  <div class="commentary-icon">
    <i class="fas fa-comment-alt"></i>
  </div>
  <div class="commentary-text" id="commentaryText">
    Welcome to Cricket Task Manager! Toggle commentary on/off using the button above.
  </div>
</div>

<!-- Toss Section -->
<div class="toss-section panel">
  <h2><i class="fas fa-coins"></i> Toss Time</h2>
  <p>Call your toss to start the game!</p>
  <div class="toss-options">
    <button class="btn" id="headsBtn"><i class="fas fa-heading"></i> Heads</button>
    <button class="btn" id="tailsBtn"><i class="fas fa-paw"></i> Tails</button>
  </div>
  <div class="coin" id="coin">🪙</div>
  <div id="tossResult" style="min-height: 30px; margin-top: 20px;"></div>
  <div id="batBowlOptions" style="display: none; margin-top: 20px;">
    <button class="btn" id="batBtn"><i class="fas fa-baseball-bat"></i> Bat</button>
    <button class="btn" id="bowlBtn"><i class="fas fa-baseball-ball"></i> Bowl</button>
  </div>
</div>

<!-- Game Section (hidden until toss) -->
<div id="gameSection" class="game-section">
  <div class="panel strategic-play">
    <div class="match-info">
      <h2><i class="fas fa-trophy"></i> Match Status</h2>
      <p id="matchStatus">Match in progress</p>
      <div class="scoreboard">
        <div class="score-item">
          <div class="score-label">Your Score</div>
          <div class="score-value" id="yourScore">0</div>
        </div>
        <div class="score-item">
          <div class="score-label">Overs</div>
          <div class="score-value" id="overs">0.0</div>
        </div>
        <div class="score-item">
          <div class="score-label">Target</div>
          <div class="score-value" id="target">120</div>
        </div>
      </div>

      <div class="player-stats">
        <div class="stat-card">
          <div class="stat-value" id="totalRuns">0</div>
          <div class="stat-label">Total Runs</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="sixes">0</div>
          <div class="stat-label">Sixes</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="fours">0</div>
          <div class="stat-label">Fours</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="wickets">0</div>
          <div class="stat-label">Wickets</div>
        </div>
      </div>

      <button class="btn" id="newMatchBtn" style="margin-top: 20px;">
        <i class="fas fa-redo"></i> New Match
      </button>
    </div>

    <div class="task-form">
      <h2><i class="fas fa-tasks"></i> Strategic Play</h2>
      <div class="form-group">
        <label for="taskName">New Delivery</label>
        <input type="text" id="taskName" placeholder="E.g. Complete project report">
      </div>

      <div class="form-group">
        <label for="taskDifficulty">Difficulty (Runs)</label>
        <select id="taskDifficulty" onchange="updateShotOptions()">
          <option value="easy">Easy (1 Run)</option>
          <option value="medium">Intermediate (2 Runs)</option>
          <option value="hard">Hard (4 Runs)</option>
          <option value="expert">Expert (6 Runs)</option>
        </select>
      </div>

      <div class="form-group">
        <label for="shotType">Shot Type</label>
        <select id="shotType">
          <!-- Options will be populated dynamically -->
        </select>
      </div>

      <div class="form-group">
        <label for="dueDate">Due Date</label>
        <input type="date" id="dueDate">
      </div>

      <div class="form-group">
        <label for="targetTime">Estimated Time (HH:MM)</label>
        <input type="time" id="targetTime">
      </div>

      <div class="form-group">
        <label for="taskNotes">Notes</label>
        <textarea id="taskNotes" rows="3" placeholder="Any additional details..."></textarea>
      </div>

      <div id="powerPlayIndicator" class="power-play" style="display: none;">
        <i class="fas fa-bolt"></i> Power Play Active! Next task worth double runs!
      </div>

      <button class="btn" id="addTaskBtn">
        <i class="fas fa-plus"></i> Take Strike
      </button>
    </div>
  </div>

  <div class="panel">
    <h2><i class="fas fa-list-check"></i> Ongoing Tasks</h2>
    <div class="task-list" id="ongoingTasks">
      <!-- Tasks will be added here dynamically -->
    </div>
  </div>

  <div class="panel">
    <h2><i class="fas fa-history"></i> Completed Tasks</h2>
    <div class="task-list" id="completedTasks">
      <!-- Completed tasks will appear here -->
    </div>
  </div>

  <div class="animation-preview">
    <div class="preview-content">
      <h2 class="preview-title">Shot Animation Preview</h2>
      <p class="preview-desc">When you complete a task, the shot animation will play here based on your shot selection.</p>
    </div>

    <!-- Animation elements -->
    <div class="cricket-ball" id="cricketBall"></div>
    <div class="batsman" id="batsman"></div>
    <div class="wicket" id="wicket">
      <div class="wicket-top"></div>
    </div>
    <div class="pitch"></div>
  </div>
</div>

<div class="panel how-to-play">
  <h2><i class="fas fa-question-circle"></i> How to Play</h2>
  <div class="step">
    <div class="step-number">1</div>
    <div class="step-content">Call the toss (Heads or Tails) to start your match</div>
  </div>
  <div class="step">
    <div class="step-number">2</div>
    <div class="step-content">Add tasks with difficulty levels that correspond to cricket runs (1, 2, 4, or 6 runs)</div>
  </div>
  <div class="step">
    <div class="step-number">3</div>
    <div class="step-content">Complete tasks before their deadline to score runs</div>
  </div>
  <div class="step">
    <div class="step-number">4</div>
    <div class="step-content">Watch animations based on your shot selection</div>
  </div>
  <div class="step">
    <div class="step-number">5</div>
    <div class="step-content">Reach the target score to win the match!</div>
  </div>
</div>

<footer>
  <div class="features">
    <div class="feature">
      <i class="fas fa-bolt"></i>
      <h3>Strategic Play</h3>
      <p>Choose shots based on task difficulty</p>
    </div>
    <div class="feature">
      <i class="fas fa-running"></i>
      <h3>Animated Shots</h3>
      <p>See your shot animations when completing tasks</p>
    </div>
    <div class="feature">
      <i class="fas fa-trophy"></i>
      <h3>Score Runs</h3>
      <p>Complete tasks to score runs and win the match</p>
    </div>
    <div class="feature">
      <i class="fas fa-microphone-alt"></i>
      <h3>Live Commentary</h3>
      <p>Immersive voice commentary for key moments</p>
    </div>
  </div>
  <p>Cricket Task Manager - Strategic Play | Created with Cricket Enthusiasm</p>
</footer>
</div>

<!-- Shot Display Overlay -->
<div class="shot-overlay" id="shotOverlay">
  <div class="shot-message" id="shotMessage"></div>
  <div class="animation-container">
    <div class="batsman" id="overlayBatsman"></div>
    <div class="cricket-ball" id="overlayBall"></div>
    <div class="pitch"></div>
  </div>
</div>

<audio id="crowdSound" preload="auto"></audio>
<audio id="wicketSound" preload="auto"></audio>
<audio id="applauseSound" preload="auto"></audio>
<audio id="cheerSound" preload="auto"></audio>

<script>
// Shot types by difficulty
const shots = {
  easy: ["Forward Defense", "Backfoot Defense", "Top Off Side", "Top Leg Side", "Dab Shot", "French Cut"],
  medium: ["Hit", "Cut Shot", "Sweep Shot", "Paddle Sweep", "Leg Glance", "Backfoot Punch", "Late Cut"],
  hard: ["Straight Drive", "Cover Drive", "Square Drive", "On Drive", "Off Drive", "Upper Cut", "Reverse Sweep", "Lofted Drive", "Switch Hit", "Slog Sweep", "Periscope"],
  expert: ["Pull Shot", "Hook Shot", "Scoop Shot", "Ramp Shot", "Helicopter Shot", "Slog Shot", "No-look Shot"]
};

// Crowd sounds
const crowdSounds = {
  one: "https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3",
  two: "https://www.soundjay.com/misc/sounds/bell-ringing-04.mp3",
  four: "https://www.soundjay.com/misc/sounds/applause-01.mp3",
  six: "https://www.soundjay.com/human/crowd-cheer-01.mp3"
};

// Commentary phrases
const commentary = {
  tossWin: "Congratulations! You've won the toss! Choose wisely.",
  tossLose: "Bad luck, you've lost the toss. The opposition has elected to bat first.",
  matchStart: "The players are taking the field. Let's play cricket!",
  oneRun: "Good running between the wickets! That's a single.",
  twoRuns: "Excellent placement! They're coming back for the second run.",
  four: "Magnificent shot! That races away to the boundary for four!",
  six: "Oh that's massive! Into the stands for a magnificent six!",
  wicket: "Oh no! That's a huge wicket! The batsman has to go.",
  powerPlay: "Power Play is activated! This is a crucial phase of the game.",
  fifty: "Fifty up for the batsman! A fine innings so far.",
  century: "Century! What an incredible achievement!",
  matchWin: "The batsman finishes it off in style! What a victory!",
  slowRunRate: "The runs are drying up here. The batsman needs to find the boundary soon.",
  boundaryDrought: "No boundaries in the last 3 overs. The pressure is building."
};

let taskId = 0;
let yourScore = 0;
let overs = 0;
let balls = 0;
let target = 120;
let matchStarted = false;
let activeTasks = {};
let totalRuns = 0;
let sixes = 0;
let fours = 0;
let wickets = 0;
let powerPlayActive = false;
let powerPlayAvailable = true;
let commentaryEnabled = true;
let lastBoundaryOver = 0;
let boundaryDroughtCount = 0;

document.addEventListener('DOMContentLoaded', function() {
  // Initialize shot options
  updateShotOptions();

  // Set target
  document.getElementById('target').textContent = target;
  updateStats();

  // Add task button event
  document.getElementById('addTaskBtn').addEventListener('click', addTask);

  // New match button
  document.getElementById('newMatchBtn').addEventListener('click', resetGame);

  // Toss buttons
  document.getElementById('headsBtn').addEventListener('click', () => performToss('Heads'));
  document.getElementById('tailsBtn').addEventListener('click', () => performToss('Tails'));

  // Bat/Bowl buttons
  document.getElementById('batBtn').addEventListener('click', () => chooseRole('Batting'));
  document.getElementById('bowlBtn').addEventListener('click', () => chooseRole('Bowling'));
  
  // Commentary toggle
  document.getElementById('commentaryToggle').addEventListener('click', toggleCommentary);
  
  // Preload sounds
  preloadSounds();
  
  // Initial commentary
  speakCommentary("Welcome to Cricket Task Manager! Toggle commentary on/off using the button above.");
  
  // Hide preloader after 2 seconds
  setTimeout(() => {
    document.getElementById('preloader').style.opacity = '0';
    setTimeout(() => {
      document.getElementById('preloader').style.display = 'none';
    }, 500);
  }, 2000);
});

function preloadSounds() {
  const sounds = [crowdSounds.one, crowdSounds.two, crowdSounds.four, crowdSounds.six];
  sounds.forEach(sound => {
    const audio = new Audio();
    audio.src = sound;
  });
}

// Toggle commentary on/off
function toggleCommentary() {
  commentaryEnabled = !commentaryEnabled;
  const toggleBtn = document.getElementById('commentaryToggle');
  
  if (commentaryEnabled) {
    toggleBtn.innerHTML = '<i class="fas fa-volume-up"></i> Commentary ON';
    toggleBtn.classList.add('active');
    speakCommentary("Commentary enabled. Enjoy the immersive cricket experience!");
  } else {
    toggleBtn.innerHTML = '<i class="fas fa-volume-mute"></i> Commentary OFF';
    toggleBtn.classList.remove('active');
    speakCommentary("Commentary disabled.");
  }
}

// Speak commentary text
function speakCommentary(text) {
  if (!commentaryEnabled) return;
  
  // Update commentary box
  const commentaryText = document.getElementById('commentaryText');
  commentaryText.textContent = text;
  
  // Use Web Speech API for voice
  if ('speechSynthesis' in window) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = 1.1;
    utterance.pitch = 1.0;
    utterance.volume = 1;
    
    // Try to find a British English voice for authenticity
    const voices = speechSynthesis.getVoices();
    const britishVoice = voices.find(voice => 
      voice.lang.includes('en-GB') || voice.name.includes('Daniel')
    );
    
    if (britishVoice) {
      utterance.voice = britishVoice;
    }
    
    speechSynthesis.speak(utterance);
  }
}

// Perform toss with enhanced animation
function performToss(call) {
  const coin = document.getElementById('coin');
  const tossResult = document.getElementById('tossResult');

  // Disable buttons during toss
  document.getElementById('headsBtn').disabled = true;
  document.getElementById('tailsBtn').disabled = true;

  coin.classList.add('flipping');
  tossResult.textContent = '';
  
  speakCommentary("The coin is up in the air...");

  setTimeout(() => {
    coin.classList.remove('flipping');
    const result = Math.random() > 0.5 ? 'Heads' : 'Tails';

    setTimeout(() => {
      coin.textContent = result === 'Heads' ? '🙂' : '🐍';
      if (call === result) {
        tossResult.innerHTML = `<p style="color: #4CAF50; font-weight: bold;">You won the toss! Choose to bat or bowl.</p>`;
        document.getElementById('batBowlOptions').style.display = 'block';
        speakCommentary(commentary.tossWin);
      } else {
        tossResult.innerHTML = `<p style="color: #F44336;">You lost the toss. Opponent chooses to bat.</p>`;
        speakCommentary(commentary.tossLose);
        setTimeout(() => {
          const opponentScore = Math.floor(Math.random() * 71) + 30;
          speakCommentary(`You're Bowling! The opposition has scored ${opponentScore} runs.`);
          chooseRole("Batting", opponentScore);
        }, 1500);
      }

      // Re-enable buttons
      document.getElementById('headsBtn').disabled = false;
      document.getElementById('tailsBtn').disabled = false;
    }, 1500);
  }, 100);
}

// Choose role
function chooseRole(role, autoScore = null) {
  document.querySelector('.toss-section').style.display = 'none';
  document.getElementById('gameSection').style.display = 'grid';

  updateShotOptions();

  const score = autoScore !== null ? autoScore : (role === "Bowling" ? Math.floor(Math.random() * 71) + 30 : null);
  if (score !== null) {
    target = score + 1;
    document.getElementById('target').textContent = target;
  }

  matchStarted = true;
  
  // Set stadium background
  document.body.classList.add('stadium-bg');
  
  // Show welcome message
  const status = `You are ${role === "Batting" ? "Batting" : "Bowling"}! ${role === "Batting" ? "Score runs by completing tasks!" : "Restrict the opponent by completing tasks!"}`;
  document.getElementById('matchStatus').textContent = status;
  
  // Commentary
  speakCommentary(commentary.matchStart);
}

// Update shot options based on difficulty
function updateShotOptions() {
  const difficulty = document.getElementById('taskDifficulty').value;
  const shotSelect = document.getElementById('shotType');

  // Clear existing options
  shotSelect.innerHTML = '';

  // Add new options based on difficulty
  shots[difficulty].forEach(shot => {
    const option = document.createElement('option');
    option.value = shot;
    option.textContent = shot;
    shotSelect.appendChild(option);
  });
}

// Add a new task
function addTask() {
  const taskName = document.getElementById('taskName').value;
  const difficulty = document.getElementById('taskDifficulty').value;
  const shotType = document.getElementById('shotType').value;
  const dueDate = document.getElementById('dueDate').value;
  const targetTime = document.getElementById('targetTime').value;
  const notes = document.getElementById('taskNotes').value;

  if (!taskName || !dueDate || !targetTime) {
    alert('Please fill all required fields');
    return;
  }

  // Create deadline timestamp
  const deadline = new Date(`${dueDate}T${targetTime}`);
  const now = new Date();
  if (deadline <= now) {
    alert('Please choose a future time');
    return;
  }

  // Calculate runs based on difficulty
  let runs = {easy: 1, medium: 2, hard: 4, expert: 6}[difficulty];
  
  // Apply power play if active
  let powerPlayUsed = false;
  if (powerPlayActive && powerPlayAvailable) {
    runs *= 2;
    powerPlayUsed = true;
    powerPlayAvailable = false;
    document.getElementById('powerPlayIndicator').style.display = 'none';
    speakCommentary(commentary.powerPlay);
  }

  // Create task item
  const taskItem = document.createElement('div');
  taskItem.className = 'task-item';
  taskItem.id = `task-${taskId}`;
  taskItem.dataset.id = taskId;
  taskItem.dataset.runs = runs;
  taskItem.dataset.shotType = shotType;
  
  let powerPlayBadge = '';
  if (powerPlayUsed) {
    powerPlayBadge = '<span class="badge"><i class="fas fa-bolt"></i> Power Play</span>';
  }

  taskItem.innerHTML = `
    <div class="task-header">
      <div class="task-title">${taskName}</div>
      <div class="task-runs">${runs} Runs (${shotType}) ${powerPlayBadge}</div>
    </div>
    <div class="task-desc">${notes || 'No additional notes'}</div>
    <div class="task-meta">
      <span><i class="far fa-calendar"></i> Due: ${dueDate} at ${targetTime}</span>
      <span><i class="fas fa-baseball-ball"></i> Shot: ${shotType}</span>
    </div>
    <div class="task-actions">
      <button class="action-btn complete-btn"><i class="fas fa-check"></i> Complete</button>
    </div>
  `;

  // Add to ongoing tasks
  document.getElementById('ongoingTasks').prepend(taskItem);

  // Add event listeners
  taskItem.querySelector('.complete-btn').addEventListener('click', function() {
    const taskElement = this.closest('.task-item');
    const id = taskElement.dataset.id;
    const runs = parseInt(taskElement.dataset.runs);
    const shotType = taskElement.dataset.shotType;
    completeTask(id, runs, shotType);
  });

  // Store task info for timeout monitoring
  const currentTaskId = taskId;
  activeTasks[currentTaskId] = {
    deadline: deadline,
    timeoutId: setTimeout(() => {
      failTask(currentTaskId);
    }, deadline - now)
  };

  // Clear form
  document.getElementById('taskName').value = '';
  document.getElementById('taskNotes').value = '';

  // Increment task ID
  taskId++;

  // Update balls and overs
  updateOvers();
  
  // Check for power play activation every 5 tasks
  if (taskId % 5 === 0 && powerPlayAvailable) {
    powerPlayActive = true;
    document.getElementById('powerPlayIndicator').style.display = 'block';
    speakCommentary("Power Play activated! Your next task will be worth double runs!");
  }
}

// Complete a task
function completeTask(id, runs, shotType) {
  const taskItem = document.getElementById(`task-${id}`);
  if (!taskItem) return;

  // Clear timeout if exists
  if (activeTasks[id]) {
    clearTimeout(activeTasks[id].timeoutId);
    delete activeTasks[id];
  }

  // Remove action buttons
  taskItem.querySelector('.task-actions').remove();

  // Add completion info
  const meta = document.createElement('div');
  meta.className = 'task-meta';
  meta.innerHTML = `
    <span><i class="fas fa-check-circle"></i> Completed: Today</span>
    <span><i class="fas fa-star"></i> +${runs} Runs</span>
  `;
  taskItem.appendChild(meta);

  // Move to completed tasks
  document.getElementById('completedTasks').prepend(taskItem);

  // Update score
  yourScore += runs;
  document.getElementById('yourScore').textContent = yourScore;
  
  // Update stats
  totalRuns += runs;
  if (runs === 6) sixes++;
  if (runs === 4) fours++;
  updateStats();

  // Track boundaries for commentary
  if (runs >= 4) {
    lastBoundaryOver = overs;
    boundaryDroughtCount = 0;
  } else {
    boundaryDroughtCount++;
  }
  
  // Commentary based on runs
  if (runs === 1) {
    speakCommentary(commentary.oneRun);
  } else if (runs === 2) {
    speakCommentary(commentary.twoRuns);
  } else if (runs === 4) {
    speakCommentary(commentary.four);
  } else if (runs === 6) {
    speakCommentary(commentary.six);
  }
  
  // Milestone commentary
  if (yourScore >= 100) {
    speakCommentary(commentary.century);
  } else if (yourScore >= 50) {
    speakCommentary(commentary.fifty);
  }
  
  // Boundary drought commentary
  if (boundaryDroughtCount >= 3) {
    speakCommentary(commentary.boundaryDrought);
    boundaryDroughtCount = 0;
  }

  // Play shot animation
  playShotAnimation(runs, shotType);

  // Check if match is won
  if (yourScore >= target) {
    setTimeout(() => {
      speakCommentary(commentary.matchWin);
      alert(`Congratulations! You won the match by scoring ${yourScore} runs!`);
      resetGame();
    }, 2000);
  }
}

// Update player stats display
function updateStats() {
  document.getElementById('totalRuns').textContent = totalRuns;
  document.getElementById('sixes').textContent = sixes;
  document.getElementById('fours').textContent = fours;
  document.getElementById('wickets').textContent = wickets;
}

// Fail a task
function failTask(id) {
  const taskItem = document.getElementById(`task-${id}`);
  if (taskItem) {
    // Clear timeout if exists
    if (activeTasks[id]) {
      delete activeTasks[id];
    }

    // Remove from DOM
    taskItem.remove();

    // Add to history as failed
    const historyList = document.getElementById('completedTasks');
    const failedItem = document.createElement('div');
    failedItem.className = 'task-item';
    failedItem.innerHTML = `
      <div class="task-header">
        <div class="task-title">${taskItem.querySelector('.task-title').textContent}</div>
        <div class="task-runs">Wicket!</div>
      </div>
      <div class="task-desc">${taskItem.querySelector('.task-desc').textContent}</div>
      <div class="task-meta" style="color: #F44336;">
        <span><i class="fas fa-times-circle"></i> Failed: Time Expired</span>
        <span><i class="fas fa-skull"></i> Out!</span>
      </div>
    `;
    historyList.prepend(failedItem);

    // Play wicket animation
    playWicketAnimation();
    
    // Commentary for wicket
    speakCommentary(commentary.wicket);
    
    // Update wickets count
    wickets++;
    updateStats();

    // Update overs
    updateOvers();
  }
}

// Play shot animation
function playShotAnimation(runs, shotType) {
  // Show overlay with animation
  const shotOverlay = document.getElementById('shotOverlay');
  const shotMessage = document.getElementById('shotMessage');
  const overlayBatsman = document.getElementById('overlayBatsman');
  const overlayBall = document.getElementById('overlayBall');

  // Reset elements
  overlayBatsman.className = 'batsman';
  overlayBall.className = 'cricket-ball';
  overlayBatsman.style.display = 'block';
  overlayBall.style.display = 'block';

  // Position elements
  overlayBatsman.style.bottom = '50px';
  overlayBatsman.style.left = '50%';
  overlayBall.style.bottom = '120px';
  overlayBall.style.left = '50%';

  // Set message
  shotMessage.textContent = `${shotType} - ${runs} Run${runs > 1 ? 's' : ''}!`;

  // Show overlay
  shotOverlay.classList.add('visible');

  // Apply animations based on runs
  if (runs === 1) {
    overlayBatsman.classList.add('animateOne');
    overlayBall.classList.add('ballAnimateOne');
    playCrowdSound('one');
  } else if (runs === 2) {
    overlayBatsman.classList.add('animateTwo');
    overlayBall.classList.add('ballAnimateTwo');
    playCrowdSound('two');
  } else if (runs === 4) {
    overlayBatsman.classList.add('animateFour');
    overlayBall.classList.add('ballAnimateFour');
    playCrowdSound('four');
  } else if (runs === 6) {
    overlayBatsman.classList.add('animateSix');
    overlayBall.classList.add('ballAnimateSix');
    playCrowdSound('six');
    createConfetti();
  }

  // Hide after animation
  setTimeout(() => {
    shotOverlay.classList.remove('visible');
    overlayBatsman.style.display = 'none';
    overlayBall.style.display = 'none';
  }, 2000);
}

// Create confetti effect for 6 runs
function createConfetti() {
  const colors = ['#ffcc00', '#ff9900', '#ff6600', '#ff3300', '#ff0000'];
  const container = document.getElementById('shotOverlay');

  for (let i = 0; i < 50; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.left = `${Math.random() * 100}%`;
    confetti.style.top = `${Math.random() * 50}%`;
    confetti.style.width = `${Math.random() * 10 + 5}px`;
    confetti.style.height = `${Math.random() * 10 + 5}px`;
    container.appendChild(confetti);

    // Apply animation
    setTimeout(() => {
      confetti.classList.add('confetti-animation');
      confetti.style.opacity = '1';

      // Remove after animation
      setTimeout(() => {
        confetti.remove();
      }, 2000);
    }, 10);
  }
}

// Play wicket animation
function playWicketAnimation() {
  const wicket = document.getElementById('wicket');
  const ball = document.getElementById('cricketBall');

  // Reset and show wicket
  wicket.style.display = 'block';
  wicket.style.opacity = '1';
  wicket.classList.value = '';
  wicket.style.left = '50%';
  wicket.style.bottom = '50px';
  wicket.style.transform = 'translateX(-50%) rotate(0)';

  // Show ball
  ball.style.display = 'block';
  ball.style.opacity = '1';
  ball.classList.value = '';
  ball.style.bottom = '120px';
  ball.style.left = '50%';

  // Play wicket sound
  const wicketSound = document.getElementById('wicketSound');
  wicketSound.src = 'https://www.soundjay.com/misc/sounds/wood-hit-1.mp3';
  wicketSound.currentTime = 0;
  wicketSound.play();

  // Apply wicket falling animation
  setTimeout(() => {
    wicket.classList.add('wicketFalling');
    ball.style.display = 'none';
  }, 500);

  // Hide after animation
  setTimeout(() => {
    wicket.style.opacity = '0';
    setTimeout(() => {
      wicket.style.display = 'none';
    }, 1000);
  }, 2000);
}

// Play crowd sound
function playCrowdSound(type) {
  const crowdSound = document.getElementById('crowdSound');
  crowdSound.src = crowdSounds[type];
  crowdSound.play().catch(e => console.log("Audio play failed:", e));
}

// Update overs
function updateOvers() {
  balls++;
  if (balls === 6) {
    balls = 0;
    overs++;
    
    // Slow run rate commentary
    if (boundaryDroughtCount >= 3) {
      speakCommentary(commentary.slowRunRate);
      boundaryDroughtCount = 0;
    }
  }
  document.getElementById('overs').textContent = `${overs}.${balls}`;
}

// Reset game
function resetGame() {
  yourScore = 0;
  overs = 0;
  balls = 0;
  taskId = 0;
  totalRuns = 0;
  sixes = 0;
  fours = 0;
  wickets = 0;
  target = 120 + Math.floor(Math.random() * 30);
  powerPlayActive = false;
  powerPlayAvailable = true;
  matchStarted = false;
  lastBoundaryOver = 0;
  boundaryDroughtCount = 0;

  document.getElementById('yourScore').textContent = yourScore;
  document.getElementById('overs').textContent = `${overs}.${balls}`;
  document.getElementById('target').textContent = target;
  updateStats();

  // Clear task lists
  document.getElementById('ongoingTasks').innerHTML = '';
  document.getElementById('completedTasks').innerHTML = '';
  document.getElementById('powerPlayIndicator').style.display = 'none';

  // Clear active tasks
  for (let id in activeTasks) {
    clearTimeout(activeTasks[id].timeoutId);
  }
  activeTasks = {};

  // Reset UI
  document.querySelector('.toss-section').style.display = 'block';
  document.getElementById('gameSection').style.display = 'none';
  document.getElementById('tossResult').innerHTML = '';
  document.getElementById('batBowlOptions').style.display = 'none';
  document.getElementById('coin').textContent = '🪙';
  
  // Remove stadium background
  document.body.classList.remove('stadium-bg');
  
  // Commentary
  speakCommentary("Match reset! Ready for a new game?");
}
</script>
</body>
</html>
